"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[271],{4271:function(n,e,s){s.r(e),s.d(e,{default:function(){return f}});var t=s(3433),r=s(9439),a=s(2791),u="ChatPage_pic__5XMob",i=s(184),c=function(){var n=(0,a.useState)(null),e=(0,r.Z)(n,2),s=e[0],t=e[1];return(0,a.useEffect)((function(){t(new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"))}),[]),(0,a.useEffect)((function(){null===s||void 0===s||s.addEventListener("close",(function(){console.log("CLOSE WS")}))}),[s]),(0,i.jsxs)("div",{children:[(0,i.jsx)(l,{wsChannel:s}),(0,i.jsx)(d,{wsChannel:s})]})},l=function(n){var e=n.wsChannel,s=(0,a.useState)([]),u=(0,r.Z)(s,2),c=u[0],l=u[1];return(0,a.useEffect)((function(){null===e||void 0===e||e.addEventListener("message",(function(n){var e=JSON.parse(n.data);l((function(n){return[].concat((0,t.Z)(n),(0,t.Z)(e))}))}))}),[e]),(0,i.jsx)("div",{style:{height:"400px",overflowY:"auto"},children:c.map((function(n,e){return(0,i.jsx)(o,{message:n},e)}))})},o=function(n){var e=n.message;return(0,i.jsxs)("div",{children:[(0,i.jsx)("img",{className:u,src:e.photo})," ",(0,i.jsx)("b",{children:e.userName}),(0,i.jsx)("br",{}),e.message,(0,i.jsx)("hr",{})]})},d=function(n){var e=n.wsChannel,s=(0,a.useState)(""),t=(0,r.Z)(s,2),u=t[0],c=t[1],l=(0,a.useState)("pending"),o=(0,r.Z)(l,2),d=o[0],f=o[1];(0,a.useEffect)((function(){null===e||void 0===e||e.addEventListener("open",(function(){f("ready")}))}),[e]);return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{children:(0,i.jsx)("textarea",{onChange:function(n){return c(n.currentTarget.value)},value:u})}),(0,i.jsx)("div",{children:(0,i.jsx)("button",{disabled:null===e||"ready"!==d,onClick:function(){u&&(null===e||void 0===e||e.send(u),c(""))},children:"Send"})})]})},f=function(){return(0,i.jsx)("div",{children:(0,i.jsx)(c,{})})}}}]);
//# sourceMappingURL=271.b642c03a.chunk.js.map